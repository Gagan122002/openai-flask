# OpenAI Flask Application
To: whoever is reading thisüòâ

I've designed an application using Flask, a micro web framework for Python, that uses OpenAI API to generate responses based on user prompts.

This application contains a search bar in the middle and when you enter your prompt in the search bar it use OpenAI Davinci (you may call it ChatGPT) to generate response.

*It's very simple, believe me. üëç*

## Just follow the steps. ##



**step 1:** Create a Folder in your directory.

**step 2:** Open terminal there.

**Step 3:** Install Flask and OpenAI
```
pip install flask
```
```
pip install openai
```

**Step 4:** Create a file named ```app.py``` and paste the code from this repository or download the code and paste ```app.py``` file in your directory.

**step 5:** Run the code. Open the link appeared on your terminal.


I tell you na, it's simple üòÖ

## Code Explanation ##
I think what you really need is an explanation.

I'll only explain the python part rest is HTML and styling/css.
```
from flask import Flask, request, jsonify
```
```request``` is used to access the data sent in the HTTP request and ```jsonify``` is used to convert the Python dictionary to a JSON object, it takes a python dictionary and returns a flask response object that has the application/json set.

The main functionailty of this application is handled by the 'index()' function, mapped to ```root URL "/"```.

If the request is a POST request, the function get the "prompt" field from the JSON body and use it to create a completion request to the OpenAI API using the ```text-davinci-003``` model with a temperature of 0.7 and a maximum of 50 tokens.

*You can change these paramenters and use the official documentation for reference https://beta.openai.com/docs/models/overview*
```
response = openai.Completion.create(
            model="text-davinci-003", prompt=prompt, temperature=0.7, max_tokens=50
        )
```
 The response from the API is parsed to get the generated text and returned as a JSON object in the "response" field. You may find the text generated by model on the first index of JSON body and generated text is stored in 'text' variable.
	 ```
	 text = response["choices"][0]["text"]
	 ```
 
 Finally, you'll find the \<div\> tag with id="response" 
 	```
	 <div id="response" class="res"></div>
	```
	where the text generated by model is placed.
	

## JavaScript Explanation ##
The 
	```
	event.preventDefault();
	```
	under the function name ## 'sendData' ## in JavaScript, prevents the page from reloading when the form is submitted.

The second line 
	```
	var prompt = document.getElementById("prompt").value; 
	```
	gets the value of the input field with the id "prompt".
	
	
```<input type="text" placeholder="Ask me something ..." id="prompt">```This is the place where user enter text in the form.
	
```var xhr = new XMLHttpRequest();``` creates a new XMLHttpRequest object, which is used to make request to the server.

```xhr.open("POST", "/", true);``` opens a new POST request to the server at the ```root endpoint "/"```. The  argument ```true``` indicates that the request is asynchronous.

```xhr.onreadystatechange = function () {...}``` sets a callback function that is called when the ready state of the request changes.


Inside the callback function, there's an if statement that checks if the ```ready state is 4 and the status is 200```. This indicates that the request was successful.


If the request is ```successful```, the response is parsed as JSON and the value of the ```response``` key is set as the inner HTML of the ```response div```.


the ```var data = JSON.stringify({"prompt": prompt});``` creates a JSON object with the key ```prompt``` and the value of the prompt variable, which is the text that the user entered in the form.


 ```xhr.send(data);``` sends the JSON data to the server.
 
 ## Notice : ##
 
 Please inform me, if any of the above explanation of content is wrong or not valid.
 Reach me at : tsaroch@proton.me
 üòâ
